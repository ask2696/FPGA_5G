function output = qam_mod_custom(inp)
    
    %test_case
    %inp = [0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1;0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1;0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1;0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1];
    
    %%% Wave form analysis
    
    output = zeros(size(inp,1)/4,1);
    
    mapping_qam = [-0.948683298050514 + 0.948683298050514i,-0.948683298050514 + 0.316227766016838i,-0.948683298050514 - 0.948683298050514i,-0.948683298050514 - 0.316227766016838i,-0.316227766016838 + 0.948683298050514i,-0.316227766016838 + 0.316227766016838i,-0.316227766016838 - 0.948683298050514i,-0.316227766016838 - 0.316227766016838i,0.948683298050514 + 0.948683298050514i,0.948683298050514 + 0.316227766016838i,0.948683298050514 - 0.948683298050514i,0.948683298050514 - 0.316227766016838i,0.316227766016838 + 0.948683298050514i,0.316227766016838 + 0.316227766016838i,0.316227766016838 - 0.948683298050514i,0.316227766016838 - 0.316227766016838i];
    val = @(inp) inp(1,1)*2^3+inp(2,1)*2^2+inp(3,1)*2^1+inp(4,1)*2^0;
    
    i1 = 1;
    
    for i= 1:size(inp,1)/4
        
        index = val(inp(i1:i1+3,1));
        output(i,1) = mapping_qam(index+1);
        i1 = i1+4;
    end


end